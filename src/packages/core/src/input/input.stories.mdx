import { FormControl, Validators, FormsModule, ReactiveFormsModule } from '@angular/forms';
import { Meta, Props, Preview, Story } from '@storybook/addon-docs/blocks';
import { moduleMetadata } from '@storybook/angular';

import { EInput, EInputModule } from './';
import { EBaseInput } from '../base-input/base-input';

# Input

<Meta title="Core/Input" decorators={[moduleMetadata({ imports: [FormsModule, ReactiveFormsModule, EInputModule] })]} />

<Props of={EInput} />
<Props of={EBaseInput} />

<Preview>
    <Story name="default" height="120px">
        {{
            template: `
                <e-base-input
                    [label]="label"
                    [hint]="hint"
                    [width]="width">
                    <input eInput>
                </e-base-input>
            `,
            props: {
                width: 12,
                label: 'Где выдан паспорт',
                hint: 'Заполнять так же, как написано в паспорте'
            }
        }}
    </Story>
</Preview>

<Preview>
    <Story name="readonly" height="120px">
        {{
            template: `
                <e-base-input
                    [width]="width"
                    [label]="label">
                    <input eInput [value]="value" readonly="true" [readonly]="appearance">
                </e-base-input>
            `,
            props: {
                label: 'Способ перевода',
                width: 12,
                value: 'Реализация несанкционированного доступа к банкоматам и платежным терминалам',
                appearance: 'readonly'
            }
        }}
    </Story>
</Preview>

<Preview>
    <Story name="disabled" height="120px">
        {{
            template: `
                <e-base-input
                    [width]="width"
                    [label]="label"
                    [hint]="hint">
                    <input eInput [value]="value" disabled="true" [disabled]="appearance">
                </e-base-input>
            `,
            props: {
                label: 'Номер обращения',
                width: 6,
                value: '1209489534589',
                hint: 'В правоохранительные органы',
                appearance: 'disabled'
            }
        }}
    </Story>
</Preview>

<Preview>
    <Story name="validation" height="120px">
        {{
            template: `
                <e-base-input
                    [width]="width"
                    [label]="label"
                    [hint]="hint"
                    [error]="error">
                    <input eInput [type]="type" [formControl]="control">
                </e-base-input>
            `,
            props: {
                label: 'Адрес электронной почты',
                width: 8,
                type: 'email',
                error: 'Неправильный почтовый адрес',
                control: new FormControl('', [ Validators.email ])
            },
        }}
    </Story>
</Preview>

<Preview>
    <Story name="validationDisabled" height="120px">
        {{
            template: `
                <e-base-input
                    [width]="width"
                    [label]="label"
                    [hint]="hint"
                    [error]="error">
                    <input eInput [type]="type" [formControl]="control" [disabledControl]="true">
                </e-base-input>
            `,
            props: {
                label: 'Адрес электронной почты',
                width: 8,
                type: 'email',
                error: 'Неправильный почтовый адрес',
                control: new FormControl('', [ Validators.email ])
            },
        }}
    </Story>
</Preview>
